digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,t_3,},],attr:[sql:select user_credit.ID,user_credit.age,user_credit.credit_rank,user_credit.income from alice.user_credit where (user_credit.age>=20) and (user_credit.age<=30),table_refs:[alice.user_credit],],party:[alice,]}"]
1 [label="runsql:{in:[],out:[Out:{t_4,t_5,t_6,},],attr:[sql:select user_stats.ID,user_stats.is_active,user_stats.order_amount from bob.user_stats where user_stats.is_active=1,table_refs:[bob.user_stats],],party:[bob,]}"]
2 [label="join:{in:[Left:{t_0,},Right:{t_4,},],out:[LeftJoinIndex:{t_7,},RightJoinIndex:{t_8,},],attr:[input_party_codes:[alice bob],join_type:0,psi_algorithm:0,],party:[alice,bob,]}"]
3 [label="filter_by_index:{in:[Data:{t_0,t_1,t_2,t_3,},RowsIndexFilter:{t_7,},],out:[Out:{t_9,t_10,t_11,t_12,},],attr:[],party:[alice,]}"]
4 [label="filter_by_index:{in:[Data:{t_4,t_5,t_6,},RowsIndexFilter:{t_8,},],out:[Out:{t_13,t_14,t_15,},],attr:[],party:[bob,]}"]
5 [label="make_share:{in:[In:{t_11,},],out:[Out:{t_16,},],attr:[],party:[alice,bob,]}"]
6 [label="make_share:{in:[In:{t_9,},],out:[Out:{t_17,},],attr:[],party:[alice,bob,]}"]
7 [label="make_share:{in:[In:{t_10,},],out:[Out:{t_18,},],attr:[],party:[alice,bob,]}"]
8 [label="make_share:{in:[In:{t_12,},],out:[Out:{t_19,},],attr:[],party:[alice,bob,]}"]
9 [label="make_share:{in:[In:{t_13,},],out:[Out:{t_20,},],attr:[],party:[alice,bob,]}"]
10 [label="make_share:{in:[In:{t_14,},],out:[Out:{t_21,},],attr:[],party:[alice,bob,]}"]
11 [label="make_share:{in:[In:{t_15,},],out:[Out:{t_22,},],attr:[],party:[alice,bob,]}"]
12 [label="sort:{in:[In:{t_16,t_17,t_18,t_16,t_19,t_20,t_21,t_22,},Key:{t_16,},],out:[Out:{t_23,t_24,t_25,t_26,t_27,t_28,t_29,t_30,},],attr:[reverse:false,],party:[alice,bob,]}"]
13 [label="group_mark:{in:[Key:{t_23,},],out:[Group:{t_31,},],attr:[],party:[alice,bob,]}"]
14 [label="count:{in:[Group:{t_31,},In:{t_31,},],out:[Out:{t_32,},],attr:[],party:[alice,bob,]}"]
15 [label="avg:{in:[Group:{t_31,},In:{t_27,},],out:[Out:{t_33,},],attr:[],party:[alice,bob,]}"]
16 [label="avg:{in:[Group:{t_31,},In:{t_30,},],out:[Out:{t_34,},],attr:[],party:[alice,bob,]}"]
17 [label="shuffle:{in:[In:{t_32,t_33,t_34,t_26,t_31,},],out:[Out:{t_35,t_36,t_37,t_38,t_39,},],attr:[],party:[alice,bob,]}"]
18 [label="make_public:{in:[In:{t_39,},],out:[Out:{t_40,},],attr:[],party:[alice,bob,]}"]
19 [label="filter:{in:[Filter:{t_40,},In:{t_35,t_36,t_37,t_38,},],out:[Out:{t_41,t_42,t_43,t_44,},],attr:[],party:[alice,bob,]}"]
20 [label="make_constant:{in:[],out:[Out:{t_45,},],attr:[scalar:4,to_status:1,],party:[alice,bob,]}"]
21 [label="broadcast:{in:[In:{t_45,},ShapeRefTensor:{t_41,},],out:[Out:{t_46,},],attr:[],party:[alice,bob,]}"]
22 [label="make_private:{in:[In:{t_41,},],out:[Out:{t_47,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
23 [label="make_private:{in:[In:{t_46,},],out:[Out:{t_48,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
24 [label="GreaterEqual:{in:[Left:{t_47,},Right:{t_48,},],out:[Out:{t_49,},],attr:[],party:[alice,]}"]
25 [label="make_public:{in:[In:{t_49,},],out:[Out:{t_50,},],attr:[],party:[alice,bob,]}"]
26 [label="apply_filter:{in:[Filter:{t_50,},In:{t_44,t_41,t_42,t_43,},],out:[Out:{t_51,t_52,t_53,t_54,},],attr:[],party:[alice,bob,]}"]
27 [label="make_private:{in:[In:{t_51,},],out:[Out:{t_55,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
28 [label="make_private:{in:[In:{t_52,},],out:[Out:{t_57,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
29 [label="make_private:{in:[In:{t_53,},],out:[Out:{t_59,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
30 [label="make_private:{in:[In:{t_54,},],out:[Out:{t_61,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
31 [label="publish:{in:[In:{t_55,t_57,t_59,t_61,},],out:[Out:{t_56,t_58,t_60,t_62,},],attr:[],party:[alice,]}"]
0 -> 2 [label = "t_0:{ID:PRIVATE:STRING}"]
0 -> 3 [label = "t_0:{ID:PRIVATE:STRING}"]
0 -> 3 [label = "t_1:{age:PRIVATE:INT64}"]
0 -> 3 [label = "t_2:{credit_rank:PRIVATE:INT64}"]
0 -> 3 [label = "t_3:{income:PRIVATE:INT64}"]
1 -> 2 [label = "t_4:{ID:PRIVATE:STRING}"]
1 -> 4 [label = "t_4:{ID:PRIVATE:STRING}"]
1 -> 4 [label = "t_5:{is_active:PRIVATE:INT64}"]
1 -> 4 [label = "t_6:{order_amount:PRIVATE:FLOAT64}"]
10 -> 12 [label = "t_21:{is_active:SECRET:INT64}"]
11 -> 12 [label = "t_22:{order_amount:SECRET:FLOAT64}"]
12 -> 13 [label = "t_23:{credit_rank:SECRET:INT64}"]
12 -> 15 [label = "t_27:{income:SECRET:INT64}"]
12 -> 16 [label = "t_30:{order_amount:SECRET:FLOAT64}"]
12 -> 17 [label = "t_26:{credit_rank:SECRET:INT64}"]
13 -> 14 [label = "t_31:{group_mark:SECRET:BOOL}"]
13 -> 14 [label = "t_31:{group_mark:SECRET:BOOL}"]
13 -> 15 [label = "t_31:{group_mark:SECRET:BOOL}"]
13 -> 16 [label = "t_31:{group_mark:SECRET:BOOL}"]
13 -> 17 [label = "t_31:{group_mark:SECRET:BOOL}"]
14 -> 17 [label = "t_32:{group_mark:SECRET:INT64}"]
15 -> 17 [label = "t_33:{income:SECRET:FLOAT64}"]
16 -> 17 [label = "t_34:{order_amount:SECRET:FLOAT64}"]
17 -> 18 [label = "t_39:{group_mark:SECRET:BOOL}"]
17 -> 19 [label = "t_35:{group_mark:SECRET:INT64}"]
17 -> 19 [label = "t_36:{income:SECRET:FLOAT64}"]
17 -> 19 [label = "t_37:{order_amount:SECRET:FLOAT64}"]
17 -> 19 [label = "t_38:{credit_rank:SECRET:INT64}"]
18 -> 19 [label = "t_40:{group_mark:PUBLIC:BOOL}"]
19 -> 21 [label = "t_41:{group_mark:SECRET:INT64}"]
19 -> 22 [label = "t_41:{group_mark:SECRET:INT64}"]
19 -> 26 [label = "t_41:{group_mark:SECRET:INT64}"]
19 -> 26 [label = "t_42:{income:SECRET:FLOAT64}"]
19 -> 26 [label = "t_43:{order_amount:SECRET:FLOAT64}"]
19 -> 26 [label = "t_44:{credit_rank:SECRET:INT64}"]
2 -> 3 [label = "t_7:{ID:PRIVATE:INT64}"]
2 -> 4 [label = "t_8:{ID:PRIVATE:INT64}"]
20 -> 21 [label = "t_45:{constant_data:PUBLIC:INT64}"]
21 -> 23 [label = "t_46:{constant_data:PUBLIC:INT64}"]
22 -> 24 [label = "t_47:{group_mark:PRIVATE:INT64}"]
23 -> 24 [label = "t_48:{constant_data:PRIVATE:INT64}"]
24 -> 25 [label = "t_49:{GreaterEqual_out:PRIVATE:BOOL}"]
25 -> 26 [label = "t_50:{GreaterEqual_out:PUBLIC:BOOL}"]
26 -> 27 [label = "t_51:{credit_rank:SECRET:INT64}"]
26 -> 28 [label = "t_52:{group_mark:SECRET:INT64}"]
26 -> 29 [label = "t_53:{income:SECRET:FLOAT64}"]
26 -> 30 [label = "t_54:{order_amount:SECRET:FLOAT64}"]
27 -> 31 [label = "t_55:{credit_rank:PRIVATE:INT64}"]
28 -> 31 [label = "t_57:{group_mark:PRIVATE:INT64}"]
29 -> 31 [label = "t_59:{income:PRIVATE:FLOAT64}"]
3 -> 5 [label = "t_11:{credit_rank:PRIVATE:INT64}"]
3 -> 6 [label = "t_9:{ID:PRIVATE:STRING}"]
3 -> 7 [label = "t_10:{age:PRIVATE:INT64}"]
3 -> 8 [label = "t_12:{income:PRIVATE:INT64}"]
30 -> 31 [label = "t_61:{order_amount:PRIVATE:FLOAT64}"]
4 -> 10 [label = "t_14:{is_active:PRIVATE:INT64}"]
4 -> 11 [label = "t_15:{order_amount:PRIVATE:FLOAT64}"]
4 -> 9 [label = "t_13:{ID:PRIVATE:STRING}"]
5 -> 12 [label = "t_16:{credit_rank:SECRET:INT64}"]
5 -> 12 [label = "t_16:{credit_rank:SECRET:INT64}"]
5 -> 12 [label = "t_16:{credit_rank:SECRET:INT64}"]
6 -> 12 [label = "t_17:{ID:SECRET:STRING}"]
7 -> 12 [label = "t_18:{age:SECRET:INT64}"]
8 -> 12 [label = "t_19:{income:SECRET:INT64}"]
9 -> 12 [label = "t_20:{ID:SECRET:STRING}"]
}